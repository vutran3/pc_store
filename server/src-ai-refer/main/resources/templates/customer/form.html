<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Customer Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .form-control.is-invalid {
            border-color: #dc3545;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Shopping System</a>
    </div>
</nav>

<div class="container mt-4">
    <h2 th:text="${customer.id != null ? 'Cập nhật khách hàng' : 'Thêm khách hàng mới'}">Customer Form</h2>

    <form th:action="${customer.id != null ? '/customer/update/' + customer.id : '/customer'}"
          th:object="${customer}" method="post" class="mt-3">

        <div class="mb-3">
            <label for="name" class="form-label">Tên khách hàng: <span class="text-danger">*</span></label>
            <input type="text" id="name" th:field="*{name}"
                   th:class="${#fields.hasErrors('name')} ? 'form-control is-invalid' : 'form-control'"
                   placeholder="Ví dụ: Nguyễn Văn A">
            <div class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
            <small class="form-text text-muted">Tên phải bắt đầu bằng chữ in hoa, ít nhất 2 ký tự</small>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email: <span class="text-danger">*</span></label>
            <input type="email" id="email" th:field="*{email}"
                   th:class="${#fields.hasErrors('email')} ? 'form-control is-invalid' : 'form-control'"
                   placeholder="example@gmail.com">
            <div class="error-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
            <small class="form-text text-muted">Email phải có định dạng @gmail.com</small>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">Điện thoại:</label>
            <input type="text" id="phone" th:field="*{phone}" class="form-control" placeholder="0912345678">
        </div>

        <div class="mb-3">
            <label for="address" class="form-label">Địa chỉ:</label>
            <textarea id="address" th:field="*{address}" class="form-control" rows="3"
                      placeholder="Nhập địa chỉ của khách hàng"></textarea>
        </div>

        <div class="mb-3">
            <label for="customerSince" class="form-label">Ngày đăng ký:</label>
            <input type="date" id="customerSince" th:value="*{customerSince}"
                   th:class="${#fields.hasErrors('customerSince')} ? 'form-control is-invalid' : 'form-control'"
                   th:max="${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')}">
            <div class="error-message" th:if="${#fields.hasErrors('customerSince')}" th:errors="*{customerSince}"></div>
            <small class="form-text text-muted">Ngày đăng ký phải trước hoặc bằng ngày hiện tại</small>
        </div>

        <div class="mb-3">
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-save"></i> Lưu
            </button>
            <a href="/customer" class="btn btn-secondary">
                <i class="bi bi-x-circle"></i> Hủy
            </a>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
